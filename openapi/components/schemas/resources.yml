resourceIndexAndView:
  allOf:
    - $ref: "e2eeObjects.yml#/e2eeMetadataBasedCommon"
    - type: "object"
      required:
        - resource_type_id
        - expired
      properties:
        resource_type_id:
          type: "string"
          format: "uuid"
        expired:
          type: "string"
          format: "date-time"
          x-nullable: true
        favorite:
          $ref: "favorites.yml#/favorite"
        secrets:
          type: "array"
          items:
            $ref: "secrets.yml#/secretIndex"
        resource_type:
          $ref: "resourceTypes.yml#/resourceType"

resourceAdd:
  type: "object"
  required:
    - resource_type_id
  properties:
    resource_type_id:
      type: "string"
      format: "uuid"
    personal:
      type: "boolean"
    folder_parent_id:
      type: "string"
      format: "uuid"
      x-nullable: true
    metadata_key_type:
      type: "string"
    metadata_key_id:
      type: "string"
      format: "uuid"
    metadata:
      type: "string"
    expired:
      type: "string"
      format: "date-time"
      x-nullable: true
    secrets:
      type: "array"
      items:
        $ref: "secrets.yml#/secretAdd"

resourceUpdate:
  type: "object"
  properties:
    name:
      type: "string"
    username:
      type: "string"
    uri:
      type: "string"
    description:
      type: "string"
    resource_type_id:
      type: "string"
      format: "uuid"
    expired:
      type: "string"
      format: "date-time"
      x-nullable: true
    secrets:
      type: "array"
      items:
        $ref: "secrets.yml#/secretUpdate"

resourceMetadataRotateKey:
  allOf:
    - $ref: "e2eeObjects.yml#/e2eeMetadataBasedCommon"
    - type: "object"
      required:
        - resource_type_id
      properties:
        resource_type_id:
          type: "string"
          format: "uuid"
